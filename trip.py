import os
import datetime
import dash
import dash_core_components as dcc
import dash_html_components as html
from decimal import Decimal

external_stylesheets = ['https://codepen.io/chriddyp/pen/bWLwgP.css']

# external JavaScript files
external_scripts = ['https://www.googletagmanager.com/gtag/js?id=UA-145454901-1']

app = dash.Dash(__name__, external_stylesheets=external_stylesheets, external_scripts=external_scripts)
app.title = 'Mexique 2019'


def serve_layout():

    prix_original = 4317


    #Get raw data from DynamoDB and push it into a dict
    raw_data = {'2019-08-21 01:12:09': Decimal('4897'), '2019-08-12 07:12:09': Decimal('4967'), '2019-12-10 07:12:09': Decimal('5476.9945230000002993620000779628753662'), '2019-09-29 07:12:09': Decimal('4847'), '2019-09-01 07:12:10': Decimal('4967'), '2019-10-08 01:12:09': Decimal('4967'), '2019-09-06 07:12:10': Decimal('4967'), '2019-09-04 19:12:09': Decimal('4897'), '2019-09-19 07:13:44': Decimal('4967'), '2019-08-27 01:12:10': Decimal('4897'), '2019-08-12 01:12:09': Decimal('4637'), '2019-10-02 19:12:10': Decimal('4847'), '2019-09-23 13:12:10': Decimal('4697'), '2019-10-08 13:12:10': Decimal('4967'), '2019-12-04 01:12:09': Decimal('5536.9944629999999961000867187976837158'), '2019-09-04 07:12:09': Decimal('4967'), '2019-07-12 01:12:10': Decimal('4947'), '2019-07-23 19:12:09': Decimal('4737'), '2019-10-01 07:12:10': Decimal('4877'), '2019-10-14 01:12:09': Decimal('4967'), '2019-09-05 19:12:11': Decimal('4897'), '2019-09-24 13:12:12': Decimal('4727'), '2019-11-15 13:12:10': Decimal('4847'), '2019-08-27 13:12:09': Decimal('4907'), '2019-09-21 13:12:11': Decimal('4897'), '2019-07-14 07:12:10': Decimal('4877'), '2019-10-01 01:12:09': Decimal('4877'), '2019-09-09 19:12:10': Decimal('4967'), '2019-07-24 13:12:09': Decimal('4737'), '2019-07-24 07:12:09': Decimal('4737'), '2019-07-24 19:12:09': Decimal('4737'), '2019-09-16 19:12:11': Decimal('4977'), '2019-09-08 19:12:11': Decimal('4967'), '2019-08-26 13:12:09': Decimal('4897'), '2019-08-30 01:12:09': Decimal('4967'), '2019-10-01 19:12:10': Decimal('4847'), '2019-08-15 07:12:10': Decimal('4667'), '2019-10-30 13:12:11': Decimal('4867'), '2019-08-21 19:12:10': Decimal('4897'), '2019-09-13 13:13:18': Decimal('4857'), '2019-08-15 07:12:09': Decimal('4667'), '2019-08-19 19:12:09': Decimal('4637'), '2019-08-15 01:12:09': Decimal('4667'), '2019-11-16 19:12:10': Decimal('4847'), '2019-09-11 07:12:11': Decimal('4947'), '2019-10-09 07:12:10': Decimal('4967'), '2019-10-25 13:12:10': Decimal('4797'), '2019-09-18 19:12:11': Decimal('4897'), '2019-08-29 19:12:09': Decimal('4967'), '2019-12-13 01:12:10': Decimal('5266.9947330000004512839950621128082275'), '2019-08-19 01:12:19': Decimal('4637'), '2019-07-15 01:12:10': Decimal('4877'), '2019-10-14 13:12:10': Decimal('4967'), '2019-12-11 13:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-10-29 13:12:09': Decimal('4777'), '2019-08-15 19:12:09': Decimal('4847'), '2019-10-03 13:12:09': Decimal('4877'), '2019-07-16 01:12:09': Decimal('4767'), '2019-12-13 13:12:09': Decimal('5206.9947929999998450512066483497619629'), '2019-07-06 18:09:07': Decimal('4997'), '2019-10-29 01:12:10': Decimal('4827'), '2019-09-06 01:12:10': Decimal('4897'), '2019-10-27 13:12:10': Decimal('4797'), '2019-10-07 19:12:09': Decimal('4967'), '2019-07-15 13:12:08': Decimal('4767'), '2019-10-27 19:12:10': Decimal('4797'), '2019-07-16 19:12:09': Decimal('4767'), '2019-10-14 13:12:09': Decimal('4967'), '2019-09-12 13:12:11': Decimal('4857'), '2019-08-22 19:12:10': Decimal('4897'), '2019-09-03 01:12:09': Decimal('4967'), '2019-10-07 01:12:10': Decimal('4967'), '2019-08-30 13:12:10': Decimal('4967'), '2019-11-15 07:12:09': Decimal('4847'), '2019-09-28 19:12:09': Decimal('4847'), '2019-09-30 07:12:09': Decimal('4847'), '2019-12-06 13:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-07-06 18:04:55': Decimal('4997'), '2019-09-28 01:12:10': Decimal('4877'), '2019-12-14 13:12:10': Decimal('5326.9946730000001480220817029476165771'), '2019-08-13 01:12:10': Decimal('4637'), '2019-07-27 19:12:09': Decimal('4737'), '2019-09-17 01:12:11': Decimal('4977'), '2019-10-29 01:12:09': Decimal('4827'), '2019-09-16 13:12:10': Decimal('4977'), '2019-08-31 07:12:10': Decimal('4967'), '2019-12-06 13:12:09': Decimal('5496.9945029999998951097950339317321777'), '2019-07-20 13:12:08': Decimal('4727'), '2019-07-17 13:12:09': Decimal('4767'), '2019-10-26 07:12:10': Decimal('4797'), '2019-07-20 19:12:09': Decimal('4727'), '2019-12-09 07:12:09': Decimal('5536.9944629999999961000867187976837158'), '2019-09-08 07:12:09': Decimal('4967'), '2019-11-01 19:12:09': Decimal('4957'), '2019-09-12 01:12:09': Decimal('4857'), '2019-12-11 19:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-08-23 07:12:10': Decimal('4897'), '2019-07-19 07:12:09': Decimal('4727'), '2019-08-12 13:12:09': Decimal('4967'), '2019-07-20 13:12:09': Decimal('4727'), '2019-08-11 19:12:09': Decimal('4637'), '2019-07-11 01:12:09': Decimal('4847'), '2019-07-19 13:12:09': Decimal('4727'), '2019-10-28 19:12:10': Decimal('4797'), '2019-07-14 19:12:09': Decimal('4877'), '2019-09-06 13:12:10': Decimal('4967'), '2019-12-04 13:12:09': Decimal('5536.9944629999999961000867187976837158'), '2019-09-22 01:12:10': Decimal('4787'), '2019-07-13 13:12:10': Decimal('4877'), '2019-08-23 13:12:09': Decimal('4897'), '2019-07-12 07:12:11': Decimal('4947'), '2019-09-10 07:12:10': Decimal('4947'), '2019-10-25 19:12:09': Decimal('4797'), '2019-09-05 01:12:10': Decimal('4897'), '2019-07-22 19:12:09': Decimal('4727'), '2019-08-12 01:12:10': Decimal('4637'), '2019-08-27 07:12:09': Decimal('4907'), '2019-07-21 19:12:09': Decimal('4727'), '2019-07-29 07:12:09': Decimal('4737'), '2019-07-21 07:12:09': Decimal('4727'), '2019-09-15 13:13:11': Decimal('4977'), '2019-08-11 01:12:09': Decimal('4637'), '2019-07-23 01:12:09': Decimal('4727'), '2019-10-25 13:12:09': Decimal('4797'), '2019-12-06 01:12:10': Decimal('5526.9944729999997434788383543491363525'), '2019-09-01 07:12:09': Decimal('4967'), '2019-09-27 01:12:10': Decimal('4877'), '2019-08-26 07:12:09': Decimal('4897'), '2019-09-03 07:12:10': Decimal('4967'), '2019-09-21 07:12:10': Decimal('4897'), '2019-12-04 07:12:10': Decimal('5536.9944629999999961000867187976837158'), '2019-09-26 13:12:11': Decimal('4877'), '2019-07-13 19:12:09': Decimal('4877'), '2019-09-26 01:12:10': Decimal('4907'), '2019-10-28 07:12:10': Decimal('4857'), '2019-09-29 07:12:11': Decimal('4847'), '2019-08-16 13:12:09': Decimal('4847'), '2019-07-06 18:14:06': Decimal('4997'), '2019-07-21 01:12:09': Decimal('4727'), '2019-07-18 07:12:09': Decimal('4797'), '2019-12-08 01:12:09': Decimal('5496.9945029999998951097950339317321777'), '2019-08-28 19:12:09': Decimal('4907'), '2019-08-21 01:12:10': Decimal('4897'), '2019-12-05 01:12:10': Decimal('5416.9945829999996931292116641998291016'), '2019-11-14 19:12:10': Decimal('4947'), '2019-09-22 07:12:10': Decimal('4787'), '2019-09-25 07:12:10': Decimal('4907'), '2019-09-11 13:12:11': Decimal('4947'), '2019-09-04 13:12:09': Decimal('4897'), '2019-07-17 01:12:09': Decimal('4767'), '2019-07-06 18:22:06': Decimal('4997'), '2019-08-28 19:12:10': Decimal('4907'), '2019-09-07 19:12:09': Decimal('4967'), '2019-11-02 07:12:10': Decimal('4957'), '2019-08-14 07:12:09': Decimal('4637'), '2019-08-18 07:19:53': Decimal('4877'), '2019-09-27 07:12:09': Decimal('4877'), '2019-09-26 19:12:10': Decimal('4877'), '2019-11-20 19:12:10': Decimal('4907'), '2019-07-13 01:12:10': Decimal('4947'), '2019-08-25 07:12:09': Decimal('4897'), '2019-09-16 07:12:11': Decimal('4977'), '2019-08-25 01:12:09': Decimal('4897'), '2019-12-08 19:12:09': Decimal('5496.9945029999998951097950339317321777'), '2019-10-13 19:12:09': Decimal('4967'), '2019-08-14 13:12:10': Decimal('4637'), '2019-10-05 19:12:09': Decimal('4967'), '2019-08-30 07:12:09': Decimal('4967'), '2019-12-05 07:12:10': Decimal('5416.9945829999996931292116641998291016'), '2019-07-28 19:12:09': Decimal('4737'), '2019-08-20 01:12:09': Decimal('4637'), '2019-11-03 01:12:09': Decimal('4957'), '2019-07-27 07:12:09': Decimal('4737'), '2019-07-07 19:12:08': Decimal('4997'), '2019-12-12 07:12:09': Decimal('5386.9946129999998447601683437824249268'), '2019-08-26 19:12:09': Decimal('4897'), '2019-12-07 19:12:09': Decimal('5496.9945029999998951097950339317321777'), '2019-12-11 07:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-10-30 07:12:10': Decimal('4957'), '2019-08-17 19:12:10': Decimal('4607'), '2019-12-10 01:12:10': Decimal('5406.9945930000003500026650726795196533'), '2019-09-10 19:12:11': Decimal('4947'), '2019-08-16 01:12:09': Decimal('4847'), '2019-09-03 19:12:10': Decimal('4967'), '2019-07-28 13:12:09': Decimal('4737'), '2019-09-28 07:12:10': Decimal('4877'), '2019-09-25 19:12:11': Decimal('4907'), '2019-07-10 19:12:10': Decimal('4847'), '2019-10-29 19:12:11': Decimal('4917'), '2019-10-31 13:12:10': Decimal('4867'), '2019-09-03 13:12:09': Decimal('4967'), '2019-07-24 01:12:08': Decimal('4737'), '2019-12-11 01:12:09': Decimal('5386.9946129999998447601683437824249268'), '2019-10-28 01:12:09': Decimal('4797'), '2019-07-25 13:12:10': Decimal('4737'), '2019-10-05 13:12:09': Decimal('4967'), '2019-08-28 01:12:10': Decimal('4907'), '2019-07-10 07:12:09': Decimal('4947'), '2019-10-09 13:12:09': Decimal('4967'), '2019-08-18 07:19:46': Decimal('4877'), '2019-08-20 13:12:09': Decimal('4897'), '2019-10-30 13:12:10': Decimal('4867'), '2019-09-07 13:12:09': Decimal('4967'), '2019-10-31 01:12:09': Decimal('4867'), '2019-09-23 01:12:11': Decimal('4787'), '2019-07-07 01:12:09': Decimal('4997'), '2019-09-05 13:12:09': Decimal('4897'), '2019-11-02 07:12:09': Decimal('4957'), '2019-09-15 07:12:10': Decimal('4977'), '2019-11-20 01:12:09': Decimal('4847'), '2019-10-07 13:12:09': Decimal('4967'), '2019-07-06 18:10:06': Decimal('4997'), '2019-09-07 07:12:10': Decimal('4967'), '2019-09-18 07:12:10': Decimal('4997'), '2019-11-19 07:12:09': Decimal('4847'), '2019-09-02 13:12:09': Decimal('4967'), '2019-07-15 07:12:08': Decimal('4767'), '2019-07-16 07:12:09': Decimal('4767'), '2019-09-02 19:12:09': Decimal('4967'), '2019-11-16 01:12:09': Decimal('4847'), '2019-12-12 19:12:11': Decimal('5266.9947330000004512839950621128082275'), '2019-07-08 19:12:09': Decimal('4997'), '2019-08-22 07:12:10': Decimal('4897'), '2019-10-10 01:12:10': Decimal('4967'), '2019-09-17 13:12:11': Decimal('4997'), '2019-07-17 07:12:10': Decimal('4767'), '2019-12-08 07:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-07-18 01:12:09': Decimal('4797'), '2019-11-03 07:12:09': Decimal('4957'), '2019-09-17 13:12:10': Decimal('4997'), '2019-08-30 13:12:09': Decimal('4967'), '2019-08-11 01:12:10': Decimal('4637'), '2019-09-20 19:12:11': Decimal('4897'), '2019-08-17 07:12:10': Decimal('4877'), '2019-10-27 13:12:09': Decimal('4797'), '2019-07-28 07:12:09': Decimal('4737'), '2019-07-11 13:12:09': Decimal('4847'), '2019-09-20 07:12:11': Decimal('4967'), '2019-10-26 13:12:10': Decimal('4797'), '2019-10-01 13:12:09': Decimal('4847'), '2019-08-30 19:12:10': Decimal('4967'), '2019-11-21 13:12:10': Decimal('4907'), '2019-10-03 07:12:09': Decimal('4877'), '2019-09-13 01:12:15': Decimal('4857'), '2019-07-14 01:12:10': Decimal('4877'), '2019-07-06 18:18:06': Decimal('4997'), '2019-09-15 19:12:10': Decimal('4977'), '2019-08-23 19:12:10': Decimal('4897'), '2019-07-08 07:12:09': Decimal('4997'), '2019-07-27 01:12:09': Decimal('4737'), '2019-10-02 01:12:09': Decimal('4847'), '2019-11-15 01:12:10': Decimal('4947'), '2019-08-14 19:12:11': Decimal('4637'), '2019-10-26 19:12:09': Decimal('4797'), '2019-07-12 13:12:09': Decimal('4947'), '2019-09-29 19:12:10': Decimal('4847'), '2019-10-24 19:12:10': Decimal('4797'), '2019-09-13 13:12:10': Decimal('4857'), '2019-10-03 01:12:09': Decimal('4877'), '2019-11-19 07:12:10': Decimal('4847'), '2019-11-03 13:12:09': Decimal('4957'), '2019-08-31 13:12:09': Decimal('4967'), '2019-10-04 07:12:09': Decimal('4877'), '2019-07-10 07:12:08': Decimal('4947'), '2019-10-09 19:12:10': Decimal('4967'), '2019-07-22 07:12:09': Decimal('4727'), '2019-10-31 07:12:09': Decimal('4867'), '2019-09-11 07:12:10': Decimal('4947'), '2019-07-25 19:12:09': Decimal('4737'), '2019-11-16 07:12:09': Decimal('4847'), '2019-11-15 19:12:10': Decimal('4847'), '2019-08-13 07:12:09': Decimal('4637'), '2019-10-26 01:12:09': Decimal('4797'), '2019-09-02 01:12:09': Decimal('4967'), '2019-07-25 01:12:09': Decimal('4737'), '2019-08-13 19:12:10': Decimal('4637'), '2019-11-04 13:12:10': Decimal('4957'), '2019-09-19 01:12:12': Decimal('4967'), '2019-09-18 01:12:10': Decimal('4997'), '2019-12-07 07:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-07-06 19:12:09': Decimal('4997'), '2019-07-20 07:12:09': Decimal('4727'), '2019-08-14 19:12:10': Decimal('4637'), '2019-10-10 13:12:10': Decimal('4967'), '2019-07-22 19:12:10': Decimal('4727'), '2019-12-03 19:12:09': Decimal('5476.9945230000002993620000779628753662'), '2019-11-04 07:12:10': Decimal('4957'), '2019-08-28 07:12:09': Decimal('4907'), '2019-09-28 13:12:10': Decimal('4847'), '2019-10-14 07:12:09': Decimal('4967'), '2019-11-02 01:12:09': Decimal('4957'), '2019-10-07 07:12:09': Decimal('4967'), '2019-08-26 19:12:11': Decimal('4897'), '2019-08-21 07:12:09': Decimal('4897'), '2019-07-06 18:17:06': Decimal('4997'), '2019-09-29 01:12:10': Decimal('4847'), '2019-08-19 13:12:09': Decimal('4637'), '2019-11-19 13:12:10': Decimal('4847'), '2019-12-06 01:12:09': Decimal('5526.9944729999997434788383543491363525'), '2019-10-01 13:12:10': Decimal('4847'), '2019-09-18 19:12:12': Decimal('4897'), '2019-09-12 07:12:10': Decimal('4857'), '2019-08-24 07:12:10': Decimal('4897'), '2019-10-06 19:12:10': Decimal('4967'), '2019-10-27 01:12:09': Decimal('4797'), '2019-10-06 01:12:09': Decimal('4967'), '2019-08-28 13:12:09': Decimal('4907'), '2019-12-14 01:12:10': Decimal('5206.9947929999998450512066483497619629'), '2019-10-04 19:12:10': Decimal('4877'), '2019-12-08 19:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-08-24 01:12:09': Decimal('4897'), '2019-09-05 19:12:10': Decimal('4897'), '2019-12-12 07:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-10-08 07:12:10': Decimal('4967'), '2019-12-09 01:12:09': Decimal('5496.9945029999998951097950339317321777'), '2019-07-21 13:12:08': Decimal('4727'), '2019-10-31 01:12:10': Decimal('4867'), '2019-09-26 13:12:10': Decimal('4877'), '2019-09-10 01:12:10': Decimal('4967'), '2019-12-10 19:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-09-27 01:12:09': Decimal('4877'), '2019-08-29 19:12:11': Decimal('4967'), '2019-07-24 01:12:09': Decimal('4737'), '2019-07-26 13:12:09': Decimal('4737'), '2019-09-08 13:12:09': Decimal('4967'), '2019-12-13 19:12:09': Decimal('5206.9947929999998450512066483497619629'), '2019-08-24 07:12:09': Decimal('4897'), '2019-08-20 19:12:09': Decimal('4897'), '2019-12-04 19:12:25': Decimal('5416.9945829999996931292116641998291016'), '2019-08-17 13:12:10': Decimal('4607'), '2019-08-11 07:12:09': Decimal('4637'), '2019-09-30 13:12:10': Decimal('4847'), '2019-08-26 07:12:10': Decimal('4897'), '2019-09-09 13:12:10': Decimal('4967'), '2019-12-10 13:12:09': Decimal('5386.9946129999998447601683437824249268'), '2019-11-04 01:12:09': Decimal('4957'), '2019-12-08 01:12:14': Decimal('5496.9945029999998951097950339317321777'), '2019-08-25 19:12:09': Decimal('4897'), '2019-09-07 01:12:09': Decimal('4967'), '2019-10-26 19:12:10': Decimal('4797'), '2019-12-07 01:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-12-13 07:12:11': Decimal('5266.9947330000004512839950621128082275'), '2019-10-06 07:12:10': Decimal('4967'), '2019-08-29 01:12:10': Decimal('4967'), '2019-09-19 19:12:11': Decimal('4967'), '2019-07-18 19:12:09': Decimal('4797'), '2019-10-25 07:12:09': Decimal('4797'), '2019-08-30 07:12:10': Decimal('4967'), '2019-10-24 13:12:11': Decimal('4797'), '2019-07-15 19:12:09': Decimal('4767'), '2019-08-10 19:24:40': Decimal('4637'), '2019-10-23 19:12:10': Decimal('4767'), '2019-09-23 19:12:10': Decimal('4697'), '2019-10-29 07:12:10': Decimal('4867'), '2019-08-30 01:12:10': Decimal('4967'), '2019-07-19 19:12:09': Decimal('4727'), '2019-09-27 19:12:10': Decimal('4877'), '2019-11-04 13:12:09': Decimal('4957'), '2019-09-24 01:12:18': Decimal('4727'), '2019-09-15 15:37:14': Decimal('4977'), '2019-09-08 07:12:10': Decimal('4967'), '2019-09-21 01:12:10': Decimal('4897'), '2019-09-15 19:12:09': Decimal('4977'), '2019-09-13 07:12:11': Decimal('4857'), '2019-10-27 07:12:09': Decimal('4797'), '2019-09-21 19:12:10': Decimal('4787'), '2019-09-16 01:12:10': Decimal('4977'), '2019-09-06 13:12:09': Decimal('4967'), '2019-08-22 07:12:09': Decimal('4897'), '2019-11-03 01:12:10': Decimal('4957'), '2019-11-21 07:12:09': Decimal('4977'), '2019-09-02 07:12:09': Decimal('4967'), '2019-08-26 01:12:10': Decimal('4897'), '2019-09-17 07:12:11': Decimal('4997'), '2019-10-24 07:12:10': Decimal('4797'), '2019-07-26 07:12:09': Decimal('4737'), '2019-08-22 13:12:09': Decimal('4897'), '2019-08-17 01:12:10': Decimal('4877'), '2019-08-18 19:12:10': Decimal('4637'), '2019-09-11 01:12:10': Decimal('4947'), '2019-10-04 13:12:09': Decimal('4877'), '2019-07-09 07:12:09': Decimal('4977'), '2019-09-26 19:12:11': Decimal('4877'), '2019-10-30 01:12:10': Decimal('4957'), '2019-09-17 01:12:10': Decimal('4977'), '2019-11-17 01:12:09': Decimal('4847'), '2019-09-13 07:12:12': Decimal('4857'), '2019-08-21 13:12:09': Decimal('4897'), '2019-10-02 13:12:10': Decimal('4847'), '2019-10-02 07:12:09': Decimal('4847'), '2019-08-31 01:12:09': Decimal('4967'), '2019-10-08 19:12:09': Decimal('4967'), '2019-07-10 13:12:09': Decimal('4847'), '2019-12-12 19:12:10': Decimal('5266.9947330000004512839950621128082275'), '2019-07-08 13:12:09': Decimal('4997'), '2019-07-06 18:13:06': Decimal('4997'), '2019-09-06 19:12:09': Decimal('4967'), '2019-09-19 13:12:11': Decimal('4897'), '2019-10-24 01:12:10': Decimal('4797'), '2019-08-16 07:12:10': Decimal('4847'), '2019-09-11 13:12:10': Decimal('4947'), '2019-07-28 19:12:08': Decimal('4737'), '2019-07-25 07:12:09': Decimal('4737'), '2019-11-19 01:12:10': Decimal('4847'), '2019-09-22 13:12:10': Decimal('4787'), '2019-09-04 07:12:10': Decimal('4967'), '2019-12-03 18:57:38': Decimal('5476.9945230000002993620000779628753662'), '2019-08-24 19:12:09': Decimal('4897'), '2019-09-24 19:12:13': Decimal('4817'), '2019-11-19 19:12:10': Decimal('4847'), '2019-08-20 01:12:10': Decimal('4637'), '2019-12-12 13:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-07-07 13:12:09': Decimal('4997'), '2019-08-21 13:12:10': Decimal('4897'), '2019-07-08 07:12:08': Decimal('4997'), '2019-12-05 19:12:10': Decimal('5466.9945330000000467407517135143280029'), '2019-09-30 01:12:09': Decimal('4847'), '2019-07-19 01:12:09': Decimal('4727'), '2019-10-06 13:12:10': Decimal('4967'), '2019-09-26 07:12:10': Decimal('4907'), '2019-10-25 01:12:10': Decimal('4797'), '2019-09-01 13:12:09': Decimal('4967'), '2019-09-20 01:12:11': Decimal('4967'), '2019-09-05 07:12:09': Decimal('4897'), '2019-10-25 19:12:10': Decimal('4797'), '2019-07-08 01:12:09': Decimal('4997'), '2019-09-10 13:12:10': Decimal('4947'), '2019-07-06 18:15:06': Decimal('4997'), '2019-07-15 13:12:09': Decimal('4767'), '2019-08-28 07:12:10': Decimal('4907'), '2019-07-20 01:12:09': Decimal('4727'), '2019-08-24 13:12:09': Decimal('4897'), '2019-10-28 13:12:10': Decimal('4797'), '2019-09-01 01:12:09': Decimal('4967'), '2019-10-10 07:12:09': Decimal('4967'), '2019-08-15 13:12:09': Decimal('4667'), '2019-07-22 13:12:09': Decimal('4727'), '2019-12-08 13:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-12-06 19:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-12-05 13:12:09': Decimal('5416.9945829999996931292116641998291016'), '2019-09-22 19:12:10': Decimal('4787'), '2019-09-29 13:12:10': Decimal('4847'), '2019-10-30 19:12:11': Decimal('4917'), '2019-11-02 19:12:10': Decimal('4957'), '2019-09-28 01:12:09': Decimal('4877'), '2019-08-30 19:12:09': Decimal('4967'), '2019-07-17 07:12:09': Decimal('4767'), '2019-11-20 07:12:10': Decimal('4847'), '2019-08-19 07:12:10': Decimal('4877'), '2019-08-11 07:12:10': Decimal('4637'), '2019-10-31 19:12:10': Decimal('4957'), '2019-07-14 13:12:10': Decimal('4877'), '2019-09-20 13:12:10': Decimal('4897'), '2019-09-04 01:12:10': Decimal('4967'), '2019-09-06 01:12:09': Decimal('4897'), '2019-12-14 07:12:10': Decimal('5326.9946730000001480220817029476165771'), '2019-12-07 19:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-09-06 07:12:09': Decimal('4967'), '2019-08-23 01:12:09': Decimal('4897'), '2019-08-18 01:12:09': Decimal('4607'), '2019-10-06 19:12:09': Decimal('4967'), '2019-09-06 19:12:10': Decimal('4967'), '2019-12-11 19:12:11': Decimal('5386.9946129999998447601683437824249268'), '2019-11-03 19:12:09': Decimal('4957'), '2019-11-20 13:12:09': Decimal('4847'), '2019-11-16 01:12:10': Decimal('4847'), '2019-12-13 19:12:10': Decimal('5206.9947929999998450512066483497619629'), '2019-07-10 01:12:09': Decimal('4947'), '2019-08-27 19:12:09': Decimal('4907'), '2019-09-10 13:12:11': Decimal('4947'), '2019-10-30 07:13:46': Decimal('4957'), '2019-09-19 19:12:12': Decimal('4967'), '2019-11-21 01:12:10': Decimal('4977'), '2019-10-02 01:12:10': Decimal('4847'), '2019-08-11 13:12:10': Decimal('4637'), '2019-11-16 13:12:10': Decimal('4847'), '2019-07-16 13:12:09': Decimal('4767'), '2019-08-19 01:12:21': Decimal('4637'), '2019-07-07 07:12:09': Decimal('4997'), '2019-09-24 19:12:12': Decimal('4817'), '2019-09-16 19:12:12': Decimal('4977'), '2019-11-01 01:12:10': Decimal('4957'), '2019-07-09 01:12:09': Decimal('4997'), '2019-09-30 19:12:10': Decimal('4877'), '2019-12-09 13:12:10': Decimal('5536.9944629999999961000867187976837158'), '2019-07-11 07:12:09': Decimal('4847'), '2019-11-20 01:12:10': Decimal('4847'), '2019-07-06 18:16:06': Decimal('4997'), '2019-09-27 07:12:10': Decimal('4877'), '2019-12-06 07:12:09': Decimal('5526.9944729999997434788383543491363525'), '2019-08-13 13:12:10': Decimal('4637'), '2019-08-15 01:12:10': Decimal('4667'), '2019-08-20 19:12:10': Decimal('4897'), '2019-07-07 19:12:09': Decimal('4997'), '2019-09-24 07:12:11': Decimal('4727'), '2019-08-20 07:12:09': Decimal('4897'), '2019-07-17 19:12:10': Decimal('4797'), '2019-08-16 07:12:11': Decimal('4847'), '2019-07-28 01:12:09': Decimal('4737'), '2019-10-04 01:12:09': Decimal('4877'), '2019-09-08 01:12:09': Decimal('4967'), '2019-09-24 01:12:19': Decimal('4727'), '2019-10-29 19:12:10': Decimal('4917'), '2019-08-29 07:12:09': Decimal('4967'), '2019-10-08 13:12:09': Decimal('4967'), '2019-09-30 07:12:10': Decimal('4847'), '2019-09-08 19:12:10': Decimal('4967'), '2019-07-06 18:23:07': Decimal('4997'), '2019-12-12 01:12:10': Decimal('5386.9946129999998447601683437824249268'), '2019-12-09 19:12:10': Decimal('5406.9945930000003500026650726795196533'), '2019-09-19 07:13:46': Decimal('4967'), '2019-08-25 13:12:09': Decimal('4897'), '2019-07-23 13:12:09': Decimal('4737'), '2019-10-09 01:12:09': Decimal('4967'), '2019-07-14 01:12:09': Decimal('4877'), '2019-09-25 01:12:10': Decimal('4907'), '2019-07-09 13:12:09': Decimal('4977'), '2019-09-27 13:12:10': Decimal('4877'), '2019-07-11 19:12:13': Decimal('4947'), '2019-08-22 01:12:09': Decimal('4897'), '2019-09-11 19:12:10': Decimal('4857'), '2019-08-29 01:12:09': Decimal('4967'), '2019-07-06 18:12:06': Decimal('4997'), '2019-12-07 13:12:10': Decimal('5496.9945029999998951097950339317321777'), '2019-08-29 13:12:09': Decimal('4967'), '2019-09-12 01:12:10': Decimal('4857'), '2019-08-15 19:12:10': Decimal('4847'), '2019-08-16 19:12:09': Decimal('4877'), '2019-09-18 13:12:11': Decimal('4997'), '2019-07-12 19:12:12': Decimal('4947'), '2019-07-06 18:11:07': Decimal('4997'), '2019-12-04 19:12:21': Decimal('5416.9945829999996931292116641998291016'), '2019-12-14 19:12:10': Decimal('5266.9947330000004512839950621128082275'), '2019-07-06 18:19:06': Decimal('4997'), '2019-09-10 07:12:11': Decimal('4947'), '2019-07-23 07:12:09': Decimal('4737'), '2019-10-13 19:12:10': Decimal('4967'), '2019-09-01 19:12:09': Decimal('4967'), '2019-07-29 01:12:09': Decimal('4737'), '2019-10-09 07:12:09': Decimal('4967'), '2019-07-22 01:12:09': Decimal('4727'), '2019-08-12 19:12:09': Decimal('4637'), '2019-07-26 01:12:09': Decimal('4737'), '2019-09-17 19:12:10': Decimal('4997'), '2019-08-14 01:12:10': Decimal('4637'), '2019-09-13 19:12:11': Decimal('4857'), '2019-10-27 01:12:10': Decimal('4797'), '2019-07-13 07:12:10': Decimal('4877'), '2019-09-14 19:12:11': Decimal('4977'), '2019-08-26 01:12:09': Decimal('4897'), '2019-10-25 01:12:09': Decimal('4797'), '2019-07-09 19:12:09': Decimal('4947'), '2019-08-31 19:12:10': Decimal('4967'), '2019-09-03 07:12:09': Decimal('4967'), '2019-09-01 19:12:10': Decimal('4967'), '2019-07-13 19:12:10': Decimal('4877'), '2019-11-02 13:12:09': Decimal('4957'), '2019-07-27 13:12:09': Decimal('4737'), '2019-10-07 19:12:10': Decimal('4967'), '2019-08-18 13:12:09': Decimal('4637'), '2019-07-18 13:12:09': Decimal('4797'), '2019-07-06 18:20:06': Decimal('4997'), '2019-09-23 07:12:10': Decimal('4787'), '2019-11-15 13:12:09': Decimal('4847'), '2019-10-01 01:12:10': Decimal('4877'), '2019-07-06 18:21:07': Decimal('4997'), '2019-11-02 13:12:10': Decimal('4957')}
    
        

    #Original proce
    ordered_data = [[datetime.datetime.strptime('2019-06-14 12:00:00', '%Y-%m-%d %H:%M:%S')], [prix_original]]

    #Load all into a sorted 2D list
    for key in sorted(raw_data.keys()):
        ordered_data[0].append(datetime.datetime.strptime(key, '%Y-%m-%d %H:%M:%S'))
        ordered_data[1].append(int(raw_data[key]))
    
    current_price = ordered_data[1][len(ordered_data[1])-1]

    abs_diff = current_price - prix_original

    rel_divv = abs_diff/prix_original*100

    price = ""

    if (current_price > prix_original):
        # more expensive
        price = html.Div([
            html.P('Le prix courant du voyage est de '),
            html.Div([
                html.P(str(current_price) + '$', style={'color': 'green', 'font-size': '25pt'})
            ]),
            html.P('C\'est une augmentation de '+ str(abs_diff)+'$ ('+str.format("{0:.1f}", rel_divv)+'%)'),
            html.P('Basé sur un prix d\'achat de 4317$'),
        ], style={'width': '1000px', 'margin-top': '0px', 'margin-bottom': '0px', 'margin-left': 'auto', 'margin-right': 'auto', 'background-color': '#EEEEEE', 'text-align': 'center', 'padding': '20px 20px 20px 20px'})
    else:
        #CHEAPER
        price = html.Div([
            html.P('Le prix courant du voyage est de '),
            html.Div([
                html.P(str(current_price) + '$', style={'color': 'red', 'font-size': '25pt'})
            ]),
            html.P('C\'est une diminution de '+ str(abs_diff)+'$ ('+str.format("{0:.1f}", rel_divv)+'%)'),
            html.P('Basé sur un prix d\'achat de 4317$'),
        ], style={'width': '1000px', 'margin-top': '0px', 'margin-bottom': '0px', 'margin-left': 'auto', 'margin-right': 'auto', 'background-color': '#EEEEEE', 'text-align': 'center', 'padding': '20px 20px 20px 20px'})

    return_html = html.Div(children=[
        html.H1(children='Prix Voyage au Mexique 2019' , style={'width': '1000px', 'margin-top': '30px', 'margin-bottom': '30px', 'margin-left': 'auto', 'margin-right': 'auto', 'background-color': '#EEEEEE', 'text-align': 'center', 'padding': '20px 20px 20px 20px'}),
    
        price,
        dcc.Graph(
            id='example-graph',
            figure={
                'data': [
                    {'x': ordered_data[0], 'y': ordered_data[1], 'type': 'line'},
                ],
                'layout': {
                    'title': 'Évolution du prix du voyage',
                    'yaxis': {'title': 'Prix $'},
                    'xaxis': {'title': 'Date'}
                }
            }, 
            style={'width': '1000px', 'margin-top': '30px', 'margin-bottom': '30px', 'margin-left': 'auto', 'margin-right': 'auto', 'background-color': '#EEEEEE', 'text-align': 'center', 'padding': '20px 20px 20px 20px'}
        )
    ], style={'text-align': 'center'})
        
    return return_html

app.layout = serve_layout

server = app.server

if __name__ == '__main__':
    app.run_server(debug=True, host='0.0.0.0')